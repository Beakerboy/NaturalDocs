<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>BinaryFile</title><link rel="stylesheet" type="text/css" href="../../../../../styles/main.css" /><script type="text/javascript" src="../../../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic4042"></a><div class="CTopic TClass LCSharp first">
 <div class="CTitle"><span class="Qualifier">CodeClear.&#8203;NaturalDocs.&#8203;Engine.</span>&#8203;BinaryFile</div>
 <div class="NDClassPrototype HasParents" id="NDClassPrototype4042"><div class="CPEntry Parent TClass"><div class="CPName">IDisposable</div></div><div class="CPEntry TClass Current"><div class="CPModifiers"><span class="SHKeyword">public</span></div><div class="CPName"><span class="Qualifier">CodeClear.&#8203;NaturalDocs.&#8203;Engine.</span>&#8203;BinaryFile</div></div></div>
 <div class="CBody"><p>A class to handle reading standard Natural Docs binary configuration files.&nbsp; This class does NOT support binary files prior to version 2.0.&nbsp; Supporting those files isn't really necessary due to the vast changes appearing with 2.0.</p><p>Rationale over using BinaryReader/Writer:</p><ul><li><p>Handles the header and version string.</p></li><li><p>Allows null strings to be written.&nbsp; Never returns empty strings, only nulls.</p></li></ul></div>
</div>

<a name="File_Format"></a><a name="Topic4043"></a><div class="CTopic TInformation LCSharp">
 <div class="CTitle">File Format</div>
 <div class="CBody"><div class="CHeading">Standard Header</div><p>All binary files from version 2.0 onwards start with the following sequence of bytes</p><pre>C9 4E 44 CD 62 69 6E BC</pre><p>The 4x and 6x bytes spell out &quot;ND&quot; and &quot;bin&quot;.</p><p>Next is the file format version as a string.&nbsp; After that comes the binary data in the format particular to that file.</p><div class="CHeading">Types and Encoding</div><p>All data types are stored in the standard encodings provided by C#'s BinaryReader and BinaryWriter.&nbsp; This means multibyte integers are stored in little endian and strings are stored in UTF-8 and are preceded by a character count in .NET's 7-bit encoding scheme.</p></div>
</div>

<a name="Constants"></a><a name="Topic4044"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Constants</div>
</div>

<a name="BinaryHeader"></a><a name="Topic4045"></a><div class="CTopic TConstant LCSharp">
 <div class="CTitle">BinaryHeader</div>
 <div id="NDPrototype4045" class="NDPrototype NoParameterForm"><span class="SHKeyword">private const</span> <span class="SHKeyword">ulong</span> BinaryHeader</div>
 <div class="CBody"><p>The first bytes that must appear in a binary file for it to be seen as being in Natural Docs' format.</p></div>
</div>

<a name="Functions"></a><a name="Topic4046"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Functions</div>
</div>

<a name="BinaryFile"></a><a name="Topic4047"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">BinaryFile</div>
 <div id="NDPrototype4047" class="NDPrototype NoParameterForm"><span class="SHKeyword">public</span> BinaryFile ()</div>
 <div class="CBody"><p>Creates the object.&nbsp; Does not open a file.</p></div>
</div>

<a name="OpenForReading"></a><a name="Topic4048"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">OpenForReading</div>
 <div id="NDPrototype4048" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">public</span> <span class="SHKeyword">bool</span> OpenForReading (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Path" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3786);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Path</a>&nbsp;</td><td class="PName last">newFileName,</td></tr><tr><td class="PType first"><a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Version</a>&nbsp;</td><td class="PName last">minimumVersion</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div>
 <div class="CBody"><p>Attempts to open the passed binary file for reading and returns whether it was successful.&nbsp; Since these files are considered disposable (i.e. they can be regenerated as necessary) it doesn't take an error list.&nbsp; The calling code is assumed to just handle the condition silently.</p><p>This file returns false if the file version can't pass &lt;Version.BinaryDataCompatibility()&gt; along with <a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Instance:Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3981);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Engine.Instance.Version</a> and the passed minimum.&nbsp; See that function's documentation for the list of tests.</p></div>
</div>

<a name="OpenForWriting"></a><a name="Topic4049"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">OpenForWriting</div>
 <div id="NDPrototype4049" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">public</span> <span class="SHKeyword">void</span> OpenForWriting (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Path" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3786);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Path</a>&nbsp;</td><td class="PName last">newFileName</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div>
 <div class="CBody"><p>Attempts to open the passed binary file for writing.&nbsp; Throws exceptions on failure.</p></div>
</div>

<a name="Close"></a><a name="Topic4050"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">Close</div>
 <div id="NDPrototype4050" class="NDPrototype NoParameterForm"><span class="SHKeyword">public</span> <span class="SHKeyword">void</span> Close ()</div>
 <div class="CBody"><p>Closes the file if one was open.</p></div>
</div>

<a name="Reading_Functions"></a><a name="Topic4051"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">Reading Functions</div>
 <div class="CBody"><p>Returns the specified type from a binary file open for reading.</p><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="ReadInt8"></a><a name="Topic4052"></a>ReadInt8</td><td class="CDLDefinition"><p>Reads a signed 8-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadUInt8"></a><a name="Topic4053"></a>ReadUInt8</td><td class="CDLDefinition"><p>Reads an unsigned 8-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadByte"></a><a name="Topic4054"></a>ReadByte</td><td class="CDLDefinition"><p>Reads an unsigned 8-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadInt16"></a><a name="Topic4055"></a>ReadInt16</td><td class="CDLDefinition"><p>Reads a signed 16-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadUInt16"></a><a name="Topic4056"></a>ReadUInt16</td><td class="CDLDefinition"><p>Reads an unsigned 16-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadInt32"></a><a name="Topic4057"></a>ReadInt32</td><td class="CDLDefinition"><p>Reads a signed 32-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadUInt32"></a><a name="Topic4058"></a>ReadUInt32</td><td class="CDLDefinition"><p>Reads an unsigned 32-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadInt64"></a><a name="Topic4059"></a>ReadInt64</td><td class="CDLDefinition"><p>Reads a signed 64-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadUInt64"></a><a name="Topic4060"></a>ReadUInt64</td><td class="CDLDefinition"><p>Reads an unsigned 64-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="ReadString"></a><a name="Topic4061"></a>ReadString</td><td class="CDLDefinition"><p>Reads a string.&nbsp; Returns null for empty strings.</p></td></tr></table></div>
</div>

<a name="Writing_Functions"></a><a name="Topic4062"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">Writing Functions</div>
 <div class="CBody"><p>Writes the specified type to a binary file open for writing.</p><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="WriteInt8"></a><a name="Topic4063"></a>WriteInt8</td><td class="CDLDefinition"><p>Writes a signed 8-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteUInt8"></a><a name="Topic4064"></a>WriteUInt8</td><td class="CDLDefinition"><p>Writes an unsigned 8-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteByte"></a><a name="Topic4065"></a>WriteByte</td><td class="CDLDefinition"><p>Writes an unsigned 8-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteInt16"></a><a name="Topic4066"></a>WriteInt16</td><td class="CDLDefinition"><p>Writes a signed 16-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteUInt16"></a><a name="Topic4067"></a>WriteUInt16</td><td class="CDLDefinition"><p>Writes an unsigned 16-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteInt32"></a><a name="Topic4068"></a>WriteInt32</td><td class="CDLDefinition"><p>Writes a signed 32-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteUInt32"></a><a name="Topic4069"></a>WriteUInt32</td><td class="CDLDefinition"><p>Writes an unsigned 32-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteInt64"></a><a name="Topic4070"></a>WriteInt64</td><td class="CDLDefinition"><p>Writes a signed 64-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteUInt64"></a><a name="Topic4071"></a>WriteUInt64</td><td class="CDLDefinition"><p>Writes an unsigned 64-bit integer.</p></td></tr><tr><td class="CDLEntry"><a name="WriteString"></a><a name="Topic4072"></a>WriteString</td><td class="CDLDefinition"><p>Writes a string.&nbsp; Empty strings are encoded as nulls.</p></td></tr></table></div>
</div>

<a name="Static_Functions"></a><a name="Topic4073"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Static Functions</div>
</div>

<a name="IsCompatible"></a><a name="Topic4074"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">IsCompatible</div>
 <div id="NDPrototype4074" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">static public</span> <span class="SHKeyword">bool</span> IsCompatible (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Version</a>&nbsp;</td><td class="PName last">dataVersion,</td></tr><tr><td class="PType first"><a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Version</a>&nbsp;</td><td class="PName last">engineVersion,</td></tr><tr><td class="PType first"><a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Version</a>&nbsp;</td><td class="PName last">minimumVersion</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div>
 <div class="CBody"><p>Determines if the version number on a binary data file is compatible with the engine version and optionally a set minimum.</p><p>Binary data from anything other than a full release is only considered compatible with that specific release, so if dataVersion is from a beta, release candidate, or development release, engineVersion must be an exact match for this function to return true.&nbsp; This is so the calling code only has to worry about the differences between the file formats of full releases and doesn't have to track when in the development process each particular change was introduced.</p><p>If the data is from a full release, it must be less than or equal to the engine version.&nbsp; It would obviously be bad to try to interpret the file format of a future release.</p><p>If minimumVersion isn't null, the data version must also be greater than or equal to it.</p></div>
</div>

<a name="IDisposable_Functions"></a><a name="Topic4075"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">IDisposable Functions</div>
</div>

<a name="Dispose"></a><a name="Topic4076"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">Dispose</div>
 <div id="NDPrototype4076" class="NDPrototype NoParameterForm"><span class="SHKeyword">public</span> <span class="SHKeyword">void</span> Dispose ()</div>
</div>

<a name="Properties"></a><a name="Topic4077"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Properties</div>
</div>

<a name="IsOpen"></a><a name="Topic4078"></a><div class="CTopic TProperty LCSharp">
 <div class="CTitle">IsOpen</div>
 <div id="NDPrototype4078" class="NDPrototype NoParameterForm"><span class="SHKeyword">public</span> <span class="SHKeyword">bool</span> IsOpen { <span class="SHKeyword">get</span> }</div>
 <div class="CBody"><p>Whether the class has a file open.</p></div>
</div>

<a name="Version"></a><a name="Topic4079"></a><div class="CTopic TProperty LCSharp">
 <div class="CTitle">Version</div>
 <div id="NDPrototype4079" class="NDPrototype NoParameterForm"><span class="SHKeyword">public</span> <a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Engine.Version</a> Version { <span class="SHKeyword">get</span> }</div>
 <div class="CBody"><p>The <a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Engine.Version</a> of the file if one is open, null otherwise.</p></div>
</div>

<a name="Variables"></a><a name="Topic4080"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Variables</div>
</div>

<a name="fileStream"></a><a name="Topic4081"></a><div class="CTopic TVariable LCSharp">
 <div class="CTitle">fileStream</div>
 <div id="NDPrototype4081" class="NDPrototype NoParameterForm"><span class="SHKeyword">protected</span> FileStream fileStream</div>
 <div class="CBody"><p>The FileStream used if a file is open, or null if not.</p></div>
</div>

<a name="fileReader"></a><a name="Topic4082"></a><div class="CTopic TVariable LCSharp">
 <div class="CTitle">fileReader</div>
 <div id="NDPrototype4082" class="NDPrototype NoParameterForm"><span class="SHKeyword">protected</span> BinaryReader fileReader</div>
 <div class="CBody"><p>The BinaryReader used if there is a file open for reading, or null if not.</p></div>
</div>

<a name="fileWriter"></a><a name="Topic4083"></a><div class="CTopic TVariable LCSharp">
 <div class="CTitle">fileWriter</div>
 <div id="NDPrototype4083" class="NDPrototype NoParameterForm"><span class="SHKeyword">protected</span> BinaryWriter fileWriter</div>
 <div class="CBody"><p>The BinaryWriter used if there is a file open for writing, or null if not.</p></div>
</div>

<a name="fileName"></a><a name="Topic4084"></a><div class="CTopic TVariable LCSharp">
 <div class="CTitle">fileName</div>
 <div id="NDPrototype4084" class="NDPrototype NoParameterForm"><span class="SHKeyword">protected</span> <a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Path" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3786);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Path</a> fileName</div>
 <div class="CBody"><p>The <a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Path" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3786);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Path</a> of the file currently being parsed, or null if none.</p></div>
</div>

<a name="version"></a><a name="Topic4085"></a><div class="CTopic TVariable LCSharp last">
 <div class="CTitle">version</div>
 <div id="NDPrototype4085" class="NDPrototype NoParameterForm"><span class="SHKeyword">protected</span> <a href="../../../../../index.html#CSharpClass:CodeClear.NaturalDocs.Engine.Version" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3567);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Engine.Version</a> version</div>
 <div class="CBody"><p>The version of the file if one is open, null otherwise.</p></div>
</div>

</body></html>